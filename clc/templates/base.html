{% load i18n %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>{% trans "Create a bucket list" %}</title>
		<link type="text/css" href="{{ MEDIA_URL }}css/ui-lightness/jquery-ui-1.8.9.custom.css" rel="stylesheet" />	
		<link type="text/css" href="{{ MEDIA_URL }}css/style.css" rel="stylesheet" />	
		<script type="text/javascript" src="{{ MEDIA_URL }}js/jquery-1.4.4.min.js"></script>
		<script type="text/javascript" src="{{ MEDIA_URL }}js/jquery-ui-1.8.9.custom.min.js"></script>
		<script type="text/javascript">
		$('html').ajaxSend(function(event, xhr, settings) {
			function getCookie(name) {
				var cookieValue = null;
				if (document.cookie && document.cookie != '') {
					var cookies = document.cookie.split(';');
					for (var i = 0; i < cookies.length; i++) {
						var cookie = jQuery.trim(cookies[i]);
						// Does this cookie string begin with the name we want?
						if (cookie.substring(0, name.length + 1) == (name + '=')) {
							cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
							break;
						}
					}
				}
				return cookieValue;
			}
			if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
				// Only send the token to relative URLs i.e. locally.
				xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
			}
		});
		</script>
		<script type="text/javascript">

		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-3636359-3']);
		  _gaq.push(['_trackPageview']);

		  (function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		</script>
</head>
<body>
<a href="/" style="text-decoration:none;"><img src="/media/images/logo.png" style="border:0px;" alt="bucket list creator"/></a>
<div id="logout">
{% if logged_in %}
<a class="logout-button" href="/logout">{% trans "Log out" %}</a>
{% endif %}
</div>
<div id="content">
{% block content %}{% endblock content %}
</div>
<p style="clear:both;">
<br /><br />
<br /><br />
<br /><br />
<center><a href="" id="ideabox">{% trans "Idea box and problem report" %}</a> - <a href="http://www.intuitivo.fr">Web developer</a></center></p>
<div id="dialog-form" title="{% trans "Send a message" %}">
	<p class="validateTips">{% trans "Email field is required if you want an answer." %}</p>

	<form>
	<fieldset>
		<label for="ideabox-email">{% trans "Email" %}</label>
		<input type="text" name="ideabox-email" id="ideabox-email" value="" class="text ui-widget-content ui-corner-all" />
		<label for="message">{% trans "Message" %}</label>
		<textarea cols="50" rows="7" name="ideabox-message" id="ideabox-message" value="" class="text ui-widget-content ui-corner-all"></textarea>
	</fieldset>
	</form>
</div>
<script type="text/javascript">
$(function(){ 
	$( "#dialog-form" ).dialog({
		autoOpen: false,
		height: 380,
		width: 350,
		modal: true,
		buttons: [
			{
				text: "{% trans "Send a message" %}",
				click: function() {
					$( this ).dialog( "close" );
					$.post(
						"/send", 
						{"email": $("#ideabox-email").val(), "message": $("#ideabox-message").val()} 
					);
				}
			},
			{
				text: "{% trans "Cancel" %}",
				click: function() {
					$( this ).dialog( "close" );
				}
			}
		]
	});
	$("#ideabox").click(function(){
		$( "#dialog-form" ).dialog( "open" );
		return false;
	});
    $(".logout-button").button({
        icons: {
            primary: "ui-icon-power",
        }
    });
  });
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-3636359-3']);
  _gaq.push(['_trackPageview']);

  (function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
